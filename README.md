# WMSApp — Система управления складом (Warehouse Management System)

## Описание проекта

WMSApp - это серверное Java-приложение, 
реализующее REST API для управления складскими процессами 
Приложение автоматизирует обработку заказов на закупку, поставок, 
приёмки и идентификации пользователей склада.

## Технологии

- Java 21
- Spring Boot
- Spring MVC
- Spring Data JPA
- Hibernate
- Apache POI (для Excel)
- iText (для PDF)
- JSP + JSTL
- Thymeleaf (для некоторых представлений)
- MySQL
- Maven
- SLF4J + Logback
- RESTful архитектура
- MVC (Model-View-Controller)

## Архитектура и структура

Проект реализован как монолитное Spring Boot-приложение, структурированное по слоям:
- **Контроллеры (controller)** — обрабатывают входящие HTTP-запросы, связывают представление и бизнес-логику.
- **Сервисы (service)** — реализуют бизнес-логику.
- **Репозитории (repository)** — доступ к данным через Spring Data JPA.
- **Модели (model)** — сущности, отображающие таблицы базы данных.
- **Утилиты и представления (util, view)** — PDF/Excel генераторы, валидация, форматирование.

Каждый модуль сопровождается DTO-классами, формами и вспомогательной логикой для взаимодействия с пользовательским интерфейсом и системой отчетности.

## REST API — основные эндпоинты

### Пользователи склада (WhUserType)
- `GET /whusertype/register` — форма регистрации пользователя склада
- `POST /whusertype/save` — сохранение нового пользователя
- `GET /whusertype/all` — просмотр всех пользователей
- `GET /whusertype/excel` — экспорт в Excel
- `GET /whusertype/pdf` — экспорт в PDF

### Заказы на закупку (PurchaseOrder)
- `GET /purchase/register` — форма регистрации заказа
- `POST /purchase/save` — сохранить заказ
- `GET /purchase/all` — список заказов
- `GET /purchase/view` — детали заказа
- `GET /purchase/updateStatus` — обновить статус заказа

### Приходные ордера\накладные (Goods Receipt Note)
- `GET /grn/register` — форма регистрации GRN
- `POST /grn/save` — сохранить GRN и сгенерировать строки
- `GET /grn/all` — все приходные ордера
- `GET /grn/parts` — детали GRN
- `GET /grn/accept` — принять строку GRN
- `GET /grn/reject` — отклонить строку GRN

### Категории заказов (OrderMethod)
- `GET /ordermethod/register` — регистрация метода заказа
- `POST /ordermethod/save` — сохранить метод
- `GET /ordermethod/all` — список всех методов
- `GET /ordermethod/excel` — экспорт в Excel

### Типы отгрузок (ShipmentType)
- `GET /shipment/register` — регистрация типа отгрузки
- `POST /shipment/save` — сохранить тип
- `GET /shipment/all` — список всех типов

### Детали закупок (PurchaseDtl)
- `GET /purchasedtl/show` — показать все детали
- `GET /purchasedtl/delete` — удалить деталь
- `GET /purchasedtl/edit` — редактировать деталь

## Структура базы данных и связи

Проект построен на реляционной модели, отражающей 
складской процесс с поддержкой заказов на закупку, 
поступлений товаров и управления пользователями. 
Ниже описаны ключевые сущности и их взаимосвязи.

---

### PurchaseOrder — Заказ на закупку

- Представляет заказ, размещённый у поставщика.
- Основные поля:
    - `id` — первичный ключ.
    - `orderCode` — код заказа.
    - `vendor` — внешний ключ на WhUserType с типом "Vendor".
    - `st` — внешний ключ на ShipmentType.
- Связи:
    - One-to-Many с `PurchaseDtl`: один заказ может иметь несколько строк.
    - Many-to-One с `WhUserType` (поставщик).
    - Many-to-One с `ShipmentType` (тип отгрузки).

---

### PurchaseDtl — Строка заказа

- Представляет конкретную позицию в заказе (артикул, количество, цена).
- Основные поля:
    - `id`
    - `part` — внешний ключ на Part.
    - `qty` — количество.
    - `baseCost` — базовая цена.
- Связи:
    - Many-to-One с `PurchaseOrder`: каждая строка относится к одному заказу.
    - Many-to-One с `Part`.

---

### Grn — Приходный ордер\накладная (Goods Receipt Note)

- Используется для фиксации поступления товаров по заказу.
- Основные поля:
    - `id`
    - `po` — внешний ключ на PurchaseOrder.
- Связи:
    - One-to-Many с `GrnDtl`: одна накладная содержит несколько строк.
    - Many-to-One с `PurchaseOrder`.

---

### GrnDtl — Строка приходного ордера

- Представляет полученные товары (фактически пришедшие по заказу).
- Основные поля:
    - `id`
    - `partCode` — код товара.
    - `baseCost`, `qty`, `status`.
- Связи:
    - Many-to-One с `Grn`.

---

### WhUserType — Пользователи склада

- Используется для учёта поставщиков и клиентов.
- Основные поля:
    - `id`, `userType` (Vendor/Customer), `userCode`, `userFor`.
- Связи:
    - One-to-Many с `PurchaseOrder`: может быть поставщиком в заказе.

---

### ShipmentType — Типы отгрузки

- Описывает способы доставки: авто, авиаперевозка и т.д.
- Основные поля:
    - `id`, `shipCode`, `description`.
- Связи:
    - One-to-Many с `PurchaseOrder`.

---

### Part — Товар/позиция на складе

- Основные поля:
    - `id`, `partCode`, `partBaseCost`, `description`.
- Связи:
    - One-to-Many с `PurchaseDtl`.

---

## Характер связей

- Все связи реализованы через JPA и Hibernate.
- Используются каскадные операции при сохранении (например, GRN и его строки).
- Присутствует валидация на уровне кода и статусы (например, INVOICED, RECEIVED, ACCEPTED, REJECTED).

## TODO

- Внедрить централизованное логирование с использованием SLF4J и Logback.
- Оптимизировать структуру кода, устранить дублирование, упростить контроллеры.
- Подготовить проект к переходу на микросервисную архитектуру:
    - Выделить модули: заказы, поставки, справочники.
    - Настроить взаимодействие через Feign.
    - Добавить Eureka, Spring Cloud Config и Gateway.

